---
title: "random-cv2"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{random-cv2}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(sagemaker)
```

```{r}
estimator <- sagemaker_estimator(sagemaker_xgb_container())
```

```{r}
estimator$hyperparam_dict$eval_metric
```


```{r}
split <- list(
  train = s3_path(default_bucket(), "abalone-train.csv"),
  validation = s3_path(default_bucket(), "abalone-test.csv")
)

grid <- list(
  max_depth = sagemaker$tuner$IntegerParameter(3L, 20L),
  colsample_bytree = sagemaker$tuner$ContinuousParameter(0, 1),
  subsample = sagemaker$tuner$ContinuousParameter(0, 1)
)

tune <- sagemaker_hyperparameter_tuner(estimator, split, grid, max_jobs = 1)
```

```{r}
model <- sagemaker_attach_tuner("xgboost-191114-2052")
model
```


```{r}
tuner <- sagemaker$tuner$HyperparameterTuner$attach("xgboost-191114-2052")
```

```{r}
tuner$latest_tuning_job$job_name
```

```{r}
tuner$estimator$hyperparam_dict$eval_metric
```

